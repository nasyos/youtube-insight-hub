# 次のステップ - 実装とテストガイド

## 📊 現在の実装状況

### ✅ 完了している機能

1. **環境変数の設定**
   - ✅ Supabase接続設定
   - ✅ Gemini APIキー設定
   - ✅ 環境変数の読み込み（UTF-8問題も解決）

2. **基本機能**
   - ✅ チャンネル追加機能（動作確認済み）
   - ✅ Supabaseデータベース連携
   - ✅ データの永続化

3. **実装済みだが未テスト**
   - ⚠️ 動画スキャン機能（Google OAuth認証が必要）
   - ⚠️ Googleドキュメント作成機能
   - ⚠️ Google Chat通知機能

---

## 🎯 推奨される次のステップ

### オプション1: Google連携機能のテスト（推奨）

**理由**: 
- 既に実装されている機能をテストして動作確認
- Google OAuth認証の設定が必要
- 動画スキャン機能を実際に使ってみる

**手順**:

#### ステップ1: Google OAuth認証の設定

1. **Google Cloud ConsoleでOAuth 2.0クライアントIDを作成**
   - [Google Cloud Console](https://console.cloud.google.com) にアクセス
   - プロジェクト「youtube-insight-hub」を選択
   - 「APIとサービス」→「認証情報」を開く
   - 「+ 認証情報を作成」→「OAuth 2.0 クライアントID」を選択
   - アプリケーションタイプ: 「ウェブアプリケーション」
   - **承認済みのJavaScript生成元**: `http://localhost:3000`
   - **承認済みのリダイレクトURI**: `http://localhost:3000`
   - 「作成」をクリック
   - **Client ID** をコピー

2. **必要なAPIの有効化**
   - 「APIとサービス」→「ライブラリ」を開く
   - 以下のAPIを検索して有効化：
     - ✅ **Google Drive API**
     - ✅ **Google Docs API**

3. **アプリ内で認証**
   - アプリの「連携設定」セクションで、Google Client IDを入力
   - 「Googleと連携する」ボタンをクリック
   - Google認証を完了

#### ステップ2: 動画スキャン機能のテスト

1. **「最新をチェック」ボタンをクリック**
2. **確認項目**:
   - [ ] スキャンが実行される（「スキャン中...」と表示）
   - [ ] 新しい要約が表示される
   - [ ] Googleドキュメントが自動的に作成される
   - [ ] 要約カードに「📄 要約をGoogleドキュメントで見る」ボタンが表示される

#### ステップ3: Google Chat通知のテスト（オプション）

1. **Google Chat Webhook URLを取得**
   - [Google Chat](https://chat.google.com) にアクセス
   - 通知を受け取りたいスペースを開く
   - 「⋮」→「アプリと統合」→「Webhookを管理」
   - Webhook URLをコピー

2. **アプリ内で設定**
   - 「GOOGLE CHAT通知」セクションで、Webhook URLを入力
   - 「新しい要約を自動的にGoogle Chatに通知」にチェック

3. **テスト**
   - 新しい要約を生成
   - Google Chatに通知が届くことを確認

---

### オプション2: 定期クローリング機能の実装

**理由**: 
- 自動化の核心機能
- 手動でスキャンする必要がなくなる

**実装内容**:

1. **Vercel Serverless Function作成**
   - `api/cron/scan-channels.ts` を作成
   - データベースからチャンネル一覧を取得
   - 各チャンネルをスキャン
   - 新しい要約を保存

2. **Vercel Cron Jobs設定**
   - `vercel.json` にcron設定を追加
   - 例: 1時間ごとに実行

3. **重複チェック**
   - 既存の要約と比較して新規のみ保存

**所要時間**: 3-4時間

---

### オプション3: Webhook機能の実装

**理由**: 
- リアルタイム通知を実現
- YouTubeから直接通知を受け取る

**実装内容**:

1. **Webhookエンドポイント作成**
   - `api/webhook/youtube.ts` を作成
   - YouTube PubSubHubbub検証に対応

2. **YouTube Data API設定**
   - チャンネル購読の設定

**所要時間**: 4-5時間

---

## 🎯 推奨される順序

### 今すぐ始めるべきこと

1. **Google連携機能のテスト**（オプション1）
   - 既に実装されている機能をテスト
   - 実際に動画スキャンとGoogleドキュメント作成を試す
   - 所要時間: 30分〜1時間

2. **定期クローリング機能の実装**（オプション2）
   - 自動化機能を追加
   - 所要時間: 3-4時間

3. **Webhook機能の実装**（オプション3）
   - リアルタイム通知を実現
   - 所要時間: 4-5時間

---

## 📝 詳細な手順

詳細な手順は以下のドキュメントを参照してください：

- **Google連携のテスト**: `テスト手順書_Google連携.md`
- **定期クローリング機能**: `実装計画.md` のフェーズ3
- **Webhook機能**: `実装計画.md` のフェーズ4

---

## ❓ どれから始めますか？

1. **Google連携機能のテスト** - 既存機能の動作確認（推奨）
2. **定期クローリング機能の実装** - 自動化機能の追加
3. **Webhook機能の実装** - リアルタイム通知の実現

どれから始めますか？

