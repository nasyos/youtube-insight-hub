# Gemini API 利用料とトークン数 - 詳細計算

## 💰 使用しているモデル

**モデル**: `gemini-3-flash-preview`

**料金体系**（Flashモデルの一般的な料金）:
- **入力**: $0.075 / 1Mトークン（約11.25円 / 1Mトークン）
- **出力**: $0.30 / 1Mトークン（約45円 / 1Mトークン）

**注意**: `gemini-3-flash-preview` はプレビュー版のため、料金が異なる可能性があります。最新の料金は[Google AI Studio](https://aistudio.google.com/app/apikey)で確認してください。

---

## 📊 このアプリでの使用量の詳細計算

### 1. チャンネル追加（`findChannel`）

**プロンプト例**:
```
YouTubeチャンネル「@programming_tutorial_youtube」の詳細情報を探してください。チャンネル名、ハンドル名(@から始まるID)、アイコン用のURLを見つけてください。
```

**推定トークン数**:
- **入力**: 約50-100トークン（プロンプト）
- **出力**: 約30-80トークン（JSONレスポンス: name, handle, thumbnailUrl）
- **合計**: 約80-180トークン

**推定料金**（有料プランの場合）:
- 入力: (100トークン ÷ 1,000,000) × $0.075 = $0.0000075（約0.001円）
- 出力: (80トークン ÷ 1,000,000) × $0.30 = $0.000024（約0.004円）
- **合計**: 約$0.00003（約0.005円）

**1回あたり**: ほぼ無料（0.005円）

---

### 2. 動画スキャン（`scanChannel`）

**プロンプト例**:
```
YouTubeチャンネル「Shin Coding Tutorial」または「@programming_tutorial_youtube」の最新の動画3件を見つけてください。
それぞれの動画について、以下の情報を日本語で取得し、要約してください。
1. 動画のタイトル
2. 公開日
3. 動画のURL
4. 内容の要約（200文字程度）
5. 重要なポイント3つ

回答は必ず有効なJSON配列形式で返してください。
```

**推定トークン数**:
- **入力**: 約150-300トークン（プロンプト）
- **出力**: 約800-1,500トークン（3件の要約 + JSON構造）
  - 各要約: タイトル（50トークン）+ 要約文（200トークン）+ 重要ポイント（100トークン）= 約350トークン
  - 3件: 約1,050トークン
  - JSON構造: 約100-200トークン
- **合計**: 約950-1,800トークン

**推定料金**（有料プランの場合）:
- 入力: (300トークン ÷ 1,000,000) × $0.075 = $0.0000225（約0.003円）
- 出力: (1,500トークン ÷ 1,000,000) × $0.30 = $0.00045（約0.07円）
- **合計**: 約$0.00047（約0.07円）

**1回あたり**: ほぼ無料（0.07円）

---

## 📈 月間使用量の詳細計算

### 使用シナリオ例

**前提条件**:
- チャンネル数: 10個
- 1日1回スキャン
- 1か月 = 30日
- チャンネル追加: 10回（初回のみ）

**計算**:

#### 1. チャンネル追加: 10回
- **入力トークン**: 10 × 100 = 1,000トークン
- **出力トークン**: 10 × 80 = 800トークン
- **合計トークン**: 1,800トークン
- **料金**: 
  - 入力: (1,000 ÷ 1,000,000) × $0.075 = $0.000075（約0.01円）
  - 出力: (800 ÷ 1,000,000) × $0.30 = $0.00024（約0.04円）
  - **合計**: 約$0.0003（約0.05円）

#### 2. 動画スキャン: 10チャンネル × 30日 = 300回
- **入力トークン**: 300 × 300 = 90,000トークン
- **出力トークン**: 300 × 1,500 = 450,000トークン
- **合計トークン**: 540,000トークン
- **料金**: 
  - 入力: (90,000 ÷ 1,000,000) × $0.075 = $0.00675（約1.01円）
  - 出力: (450,000 ÷ 1,000,000) × $0.30 = $0.135（約20.25円）
  - **合計**: 約$0.14（約21円）

#### 3. 月間合計
- **総トークン数**: 約541,800トークン
- **総料金**: 約$0.14（約21円）/月

---

## 💡 料金の目安（まとめ）

### 無料プランで使用する場合

- **料金**: **$0（無料）**
- **制限**: 
  - 1分間あたり: 15リクエスト
  - 1日あたり: 1,500リクエスト
  - 1分間あたりのトークン数: 1,000,000トークン
- **このアプリの使用量**: 
  - 1日: 約10-20リクエスト
  - 1日: 約18,000-36,000トークン
- **結論**: **無料プランで十分**

### 有料プランで使用する場合

- **月間料金**: 約$0.14（約21円）
- **年間料金**: 約$1.68（約252円）
- **結論**: **非常に安価**

---

## 🔍 トークン数の確認方法

### 方法1: Google Cloud Consoleで確認

1. [Google Cloud Console](https://console.cloud.google.com) にアクセス
2. 「APIとサービス」→「使用量と請求額」を開く
3. 「Generative Language API」を選択
4. 使用量とトークン数を確認

### 方法2: Google AI Studioで確認

1. [Google AI Studio](https://aistudio.google.com/app/apikey) にアクセス
2. 「使用量と請求額」を開く
3. 使用量とトークン数を確認

### 方法3: APIレスポンスで確認

Gemini APIのレスポンスには、使用したトークン数が含まれている場合があります。現在の実装では、トークン数をログに出力していませんが、必要に応じて追加できます。

---

## 📊 トークン数の計算方法

### 日本語テキストの場合

- **1文字 ≈ 1トークン**（概算）
- 例: 「YouTubeチャンネル「Shin Coding Tutorial」の詳細情報を探してください。」= 約30トークン

### JSONレスポンスの場合

- **JSON構造 + テキスト内容**で計算
- 例: 3件の要約（各200文字）+ JSON構造 = 約800-1,500トークン

### Google Search grounding機能

- この機能を使用すると、検索結果も含まれるため、トークン数が増える可能性があります
- ただし、料金への影響は微々たるものです

---

## ⚠️ 注意事項

### 無料プランの制限

- **1日1,500リクエスト**まで
- このアプリの使用量: 1日10-20リクエスト程度
- **無料プランで十分**

### 有料プランへの移行

- 無料プランの制限に達した場合のみ必要
- 月間料金は非常に安価（約21円/月）

### 料金の変動

- `gemini-3-flash-preview` はプレビュー版のため、料金が変動する可能性があります
- 最新の料金は[Google AI Studio](https://aistudio.google.com/app/apikey)で確認してください

---

## 🎯 まとめ

### 料金の目安

- **無料プラン**: $0（無料）
- **有料プラン**: 約$0.14/月（約21円/月）

### トークン数の目安

- **チャンネル追加**: 約80-180トークン/回
- **動画スキャン**: 約950-1,800トークン/回
- **月間**: 約541,800トークン/月

### 結論

- **無料プランで十分**
- 有料プランでも非常に安価（約21円/月）
- 料金を気にする必要はほとんどありません

---

## 📝 参考リンク

- [Gemini API Pricing](https://ai.google.dev/pricing)
- [Google AI Studio](https://aistudio.google.com/app/apikey)
- [Google Cloud Console](https://console.cloud.google.com)


