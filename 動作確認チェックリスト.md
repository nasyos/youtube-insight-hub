# 動作確認チェックリスト

## ✅ 基本設定確認

### 1. 環境変数の確認
- [ ] `.env.local` ファイルが存在する
- [ ] `VITE_SUPABASE_URL` が設定されている
- [ ] `VITE_SUPABASE_ANON_KEY` が設定されている
- [ ] `VITE_GEMINI_API_KEY` が設定されている

### 2. 開発サーバーの確認
- [ ] `npm run dev` でサーバーが起動している
- [ ] `http://localhost:3000` または `http://localhost:3002` にアクセスできる
- [ ] 画面が表示されている

---

## 🔍 ブラウザコンソールの確認

### 正常な場合のメッセージ
- ✅ `Supabase接続設定が確認されました` が表示される
- ✅ Supabaseの警告メッセージが**表示されない**
- ✅ Gemini APIキーの警告が**表示されない**（設定済みの場合）

### エラーの場合
- ❌ `Supabase環境変数が設定されていません` → 環境変数を確認
- ❌ `Gemini APIキーが設定されていません` → 環境変数を確認
- ❌ `データの読み込みに失敗しました` → Supabase接続を確認

---

## 🧪 機能テスト

### テスト1: Supabase接続確認

1. **ブラウザのコンソール（F12）を開く**
2. **Networkタブを開く**
3. **ページをリロード（F5）**
4. **確認項目**:
   - Supabaseへのリクエストが送信されているか
   - ステータスコードが200（成功）か確認

### テスト2: チャンネル追加機能

1. **サイドバーの「チャンネルを追加」フォームを使用**
2. **チャンネル名または@ハンドルを入力**
   - 例: `@YouTube` または `YouTube`
3. **「+」ボタンをクリック**
4. **確認項目**:
   - [ ] チャンネルが追加される
   - [ ] 「監視中」セクションに表示される
   - [ ] Supabaseの`channels`テーブルにデータが保存される（Table Editorで確認）

### テスト3: 動画スキャン機能

**前提条件**: 
- Google認証が完了している必要があります

1. **Google Client IDを設定**
   - 「連携設定」でGoogle Client IDを入力
   - 「Googleと連携する」をクリック
   - Google認証を完了

2. **「最新をチェック」ボタンをクリック**
3. **確認項目**:
   - [ ] スキャンが実行される（「スキャン中...」と表示）
   - [ ] 新しい要約が表示される
   - [ ] 各要約カードに「📄 要約をGoogleドキュメントで見る」ボタンが表示される
   - [ ] Googleドキュメントが作成される
   - [ ] Supabaseの`summaries`テーブルにメタデータが保存される

### テスト4: Googleドキュメント確認

1. **要約カードの「📄 要約をGoogleドキュメントで見る」ボタンをクリック**
2. **確認項目**:
   - [ ] Googleドキュメントが開く
   - [ ] 要約内容が正しく表示される
   - [ ] タイトル、チャンネル名、公開日が表示される
   - [ ] 要約文と重要ポイントが表示される

### テスト5: Google Chat通知機能

**前提条件**:
- Google Chat Webhook URLを設定済み

1. **「Google Chat通知」セクションで設定**
   - Webhook URLを入力
   - 「新しい要約を自動的にGoogle Chatに通知」にチェック

2. **新しい要約を生成**（スキャンを実行）
3. **確認項目**:
   - [ ] Google Chatに通知が送信される
   - [ ] 通知に動画タイトル、チャンネル名、Googleドキュメントリンクが含まれる

---

## 📊 Supabaseデータベース確認

### Table Editorで確認

1. **Supabaseダッシュボードを開く**
2. **「Table Editor」をクリック**
3. **確認項目**:

#### channels テーブル
- [ ] テーブルが存在する
- [ ] チャンネル追加時にデータが保存される
- [ ] カラム: `id`, `name`, `handle`, `thumbnail_url`, `last_checked`, `created_at`

#### summaries テーブル
- [ ] テーブルが存在する
- [ ] スキャン実行時にメタデータが保存される
- [ ] カラム: `id`, `video_url`, `title`, `channel_id`, `channel_title`, `published_at`, `thumbnail_url`, `doc_url`, `doc_id`, `created_at`, `updated_at`

---

## ⚠️ トラブルシューティング

### 問題1: Supabase接続エラー

**症状**: コンソールに「Supabase環境変数が設定されていません」と表示される

**確認項目**:
1. `.env.local` ファイルが正しく保存されているか
2. 環境変数名が正しいか（`VITE_SUPABASE_URL`, `VITE_SUPABASE_ANON_KEY`）
3. 値に余分なスペースや引用符がないか
4. 開発サーバーを再起動したか

**解決方法**:
```env
# 正しい形式
VITE_SUPABASE_URL=https://abcdefghijklmnop.supabase.co
VITE_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# 間違った形式（引用符は不要）
VITE_SUPABASE_URL="https://abcdefghijklmnop.supabase.co"  # ❌
```

### 問題2: チャンネル追加ができない

**症状**: チャンネルを追加しても表示されない

**確認項目**:
1. Gemini APIキーが設定されているか
2. コンソールにエラーメッセージが表示されていないか
3. Supabaseの`channels`テーブルにデータが保存されているか

### 問題3: スキャンが実行できない

**症状**: 「最新をチェック」ボタンをクリックしても何も起こらない

**確認項目**:
1. Google認証が完了しているか（「Google 接続済み」と表示されているか）
2. Gemini APIキーが設定されているか
3. チャンネルが追加されているか
4. コンソールにエラーメッセージが表示されていないか

---

## ✅ 完了チェックリスト

すべてのテストが完了したら、以下を確認：

- [ ] 画面が正常に表示される
- [ ] Supabase接続が正常に動作する
- [ ] チャンネル追加機能が動作する
- [ ] 動画スキャン機能が動作する
- [ ] Googleドキュメント作成機能が動作する
- [ ] Google Chat通知機能が動作する（設定済みの場合）
- [ ] データベースにデータが正しく保存される

---

## 🎉 次のステップ

すべての機能が正常に動作している場合：

1. **定期クローリング機能の実装**（フェーズ3）
2. **Webhook機能の実装**（フェーズ4）
3. **Vercelへのデプロイ**

現在の実装状況を確認して、次のステップに進みましょう！

