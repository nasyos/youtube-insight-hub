# OAuth同意画面設定 - よくある質問と解決方法

## ❓ 質問1: アプリのドメインにlocalhostは登録できない

### 回答

**localhostは承認済みドメインに登録する必要はありません。**

### 正しい設定方法

1. **アプリケーションのホームページ**
   - 「アプリケーションのホームページ」フィールドに `http://localhost:3000` を入力
   - これは問題ありません

2. **承認済みドメイン**
   - **localhostは追加しないでください**
   - 承認済みドメインは、本番環境で使用するドメイン（例: `yourdomain.com`）のみを追加します
   - 開発環境（localhost）では不要です

3. **プライバシーポリシーと利用規約**
   - 開発環境では空欄のままでも問題ありません
   - 本番環境で公開する際に設定します

---

## ❓ 質問2: スコープの追加はどこでできますか？

### 回答

スコープは「概要」ページまたは「スコープ」セクションで追加します。

### 手順

#### 方法1: 概要ページから追加

1. 左側のメニューから「概要」をクリック
2. 「スコープ」セクションを探す
3. 「スコープを追加または削除」をクリック
4. 以下のスコープを追加：
   - ✅ `https://www.googleapis.com/auth/drive.file`
   - ✅ `https://www.googleapis.com/auth/drive.metadata.readonly`
   - ✅ `https://www.googleapis.com/auth/documents`

#### 方法2: ブランディングページから追加

1. 「ブランディング」ページを開く
2. ページ下部に「スコープ」セクションがある場合があります
3. 「スコープを追加または削除」をクリック

#### 方法3: 直接検索

1. 検索バーで「スコープ」と検索
2. スコープ設定ページに移動

---

## ❓ 質問3: 対象（Audience）ページでテストユーザーの追加方法がわからない

### 回答

「対象」ページの「テストユーザー」セクションで追加できます。

### 手順

1. **「対象」ページを開く**
   - 左側のメニューから「対象」をクリック

2. **「テストユーザー」セクションを探す**
   - ページ下部に「テストユーザー」セクションがあります

3. **「+ Add users」ボタンをクリック**
   - 青いボタンが表示されています
   - このボタンをクリック

4. **メールアドレスを入力**
   - モーダルが開きます
   - 自分のGoogleアカウントのメールアドレスを入力
   - 「追加」をクリック

5. **確認**
   - テストユーザーのリストに追加されたメールアドレスが表示されます

---

## 📋 正しい設定手順（まとめ）

### ステップ1: ブランディングページの設定

1. **アプリ名**: `YouTube Insight Hub`（既に入力済み）
2. **ユーザーサポートメール**: 自分のメールアドレス（既に入力済み）
3. **アプリケーションのホームページ**: `http://localhost:3000` を入力
4. **プライバシーポリシー**: 空欄のまま（開発環境では不要）
5. **利用規約**: 空欄のまま（開発環境では不要）
6. **承認済みドメイン**: **何も追加しない**（localhostは不要）

### ステップ2: スコープの追加

1. **「概要」ページに移動**
   - 左側のメニューから「概要」をクリック

2. **「スコープ」セクションを探す**
   - ページ内で「スコープ」というセクションを探す
   - 「スコープを追加または削除」ボタンをクリック

3. **スコープを追加**
   - 検索バーで以下を検索して追加：
     - `drive.file`
     - `drive.metadata.readonly`
     - `documents`

### ステップ3: テストユーザーの追加

1. **「対象」ページに移動**
   - 左側のメニューから「対象」をクリック

2. **「テストユーザー」セクションを探す**
   - ページ下部に「テストユーザー」セクションがあります

3. **「+ Add users」ボタンをクリック**
   - 青いボタンをクリック

4. **メールアドレスを追加**
   - 自分のGoogleアカウントのメールアドレスを入力
   - 「追加」をクリック

### ステップ4: 保存

1. 各ページで「保存」または「保存して次へ」をクリック
2. すべての設定が完了したら、「ダッシュボードに戻る」をクリック

---

## ⚠️ 重要な注意事項

### localhostについて

- **承認済みドメインには追加しない**
- **アプリケーションのホームページには入力できる**
- 開発環境では問題なく動作します

### スコープについて

- スコープは「概要」ページで追加するのが一般的です
- 見つからない場合は、検索バーで「スコープ」と検索してください

### テストユーザーについて

- 「対象」ページの「テストユーザー」セクションで追加します
- 「+ Add users」ボタンが見つからない場合は、ページを下にスクロールしてください

---

## 🎯 次のステップ

OAuth同意画面の設定が完了したら：

1. **OAuth 2.0クライアントIDを作成**
   - 「認証情報」ページに移動
   - 「+ 認証情報を作成」→「OAuth 2.0 クライアントID」を選択

2. **必要なAPIを有効化**
   - Google Drive API
   - Google Docs API

3. **アプリ内で認証をテスト**

---

## 📝 参考

- [OAuth同意画面の設定](https://console.cloud.google.com/apis/credentials/consent)
- [Google Cloud Console](https://console.cloud.google.com)

