# 再テスト手順書

## 📋 テストの全体フロー

1. **基本機能のテスト**（環境変数、Supabase接続）
2. **チャンネル追加機能のテスト**
3. **重複チェック機能のテスト**
4. **動画スキャン機能のテスト**
5. **Googleドキュメント作成機能のテスト**
6. **Google Chat通知機能のテスト**（オプション）

---

## ✅ ステップ1: 基本機能のテスト

### 1.1 環境変数の確認

1. ブラウザで `http://localhost:3000` を開く
2. 開発者ツール（F12）を開く
3. コンソールタブで以下を確認：

**期待される表示**:
```
✅ Supabase接続設定が確認されました
✅ Gemini APIキーが正常に設定されました
```

### 1.2 エラーの確認

- [ ] 406エラーが表示されない
- [ ] 429エラーが表示されない
- [ ] その他のエラーが表示されない

---

## ✅ ステップ2: チャンネル追加機能のテスト

### 2.1 チャンネル追加

1. 「チャンネルを追加」セクションで、チャンネル名または@ハンドルを入力
   - 例: `@programming_tutorial_youtube` または `Shin Coding Tutorial`
2. 「+」ボタンをクリック
3. **期待される動作**:
   - [ ] コンソールに「🔍 チャンネル情報を取得中...（5-30秒かかる場合があります）」と表示される
   - [ ] 5-30秒待つ（Gemini APIの処理時間）
   - [ ] チャンネルが「監視中」セクションに表示される
   - [ ] エラーメッセージが表示されない

### 2.2 重複チェック

1. 同じチャンネルを再度追加しようとする
2. **期待される動作**:
   - [ ] 「このチャンネルは既に追加されています。」というエラーメッセージが表示される
   - [ ] チャンネルが重複して追加されない

---

## ✅ ステップ3: 重複チェック機能のテスト

### 3.1 初回スキャン

1. 「最新をチェック」ボタンをクリック
2. **期待される動作**:
   - [ ] 「スキャン中...」と表示される
   - [ ] 数秒〜数十秒待つ（Gemini APIの処理時間）
   - [ ] 新しい要約カードが表示される
   - [ ] 各要約カードに「📄 要約をGoogleドキュメントで見る」ボタンが表示される

### 3.2 重複チェックの確認

1. **再度「最新をチェック」ボタンをクリック**
2. **期待される動作**:
   - [ ] コンソールに「⏭️ スキップ: 既に取得済みの動画 "タイトル"」と表示される
   - [ ] 既に取得済みの動画はスキップされる
   - [ ] 新しい動画のみが追加される（新しい動画がある場合）
   - [ ] 重複した要約が作成されない

### 3.3 確認項目

- [ ] 同じ動画の要約が重複して作成されない
- [ ] コンソールにスキップメッセージが表示される
- [ ] データベースに重複したデータが保存されない

---

## ✅ ステップ4: Googleドキュメント作成機能のテスト

### 4.1 自動保存の確認

1. スキャンを実行して新しい要約を生成
2. **期待される動作**:
   - [ ] Googleドキュメントが自動的に作成される
   - [ ] 要約カードに「📄 要約をGoogleドキュメントで見る」ボタンが表示される

### 4.2 Google Driveでの確認

1. [Google Drive](https://drive.google.com) にアクセス
2. 「YouTube Insight Hub」フォルダを探す
3. **確認項目**:
   - [ ] フォルダが存在する
   - [ ] フォルダ内に要約ドキュメントが保存されている
   - [ ] ドキュメント名が動画タイトルになっている

### 4.3 ドキュメント内容の確認

1. 要約カードの「📄 要約をGoogleドキュメントで見る」ボタンをクリック
2. **確認項目**:
   - [ ] Googleドキュメントが開く
   - [ ] ドキュメントに以下が含まれている：
     - ✅ 動画のタイトル
     - ✅ チャンネル名
     - ✅ 公開日
     - ✅ 要約文（200文字程度）
     - ✅ 重要なポイント（3つ）

---

## ✅ ステップ5: Google Chat通知機能のテスト（オプション）

### 5.1 Webhook URLの設定

1. [Google Chat](https://chat.google.com) でWebhook URLを取得
2. アプリの「GOOGLE CHAT通知」セクションで、Webhook URLを入力
3. 「新しい要約を自動的にGoogle Chatに通知」にチェックを入れる

### 5.2 通知のテスト

1. 新しい要約を生成（スキャンを実行）
2. **確認項目**:
   - [ ] Google Chatのスペースに通知が送信される
   - [ ] 通知に動画タイトル、チャンネル名、Googleドキュメントリンクが含まれる

---

## ✅ 完了チェックリスト

すべてのテストが完了したら、以下を確認：

- [ ] 環境変数が正しく読み込まれている
- [ ] 406エラーが表示されない
- [ ] チャンネル追加機能が正常に動作する
- [ ] 重複チェック機能が正常に動作する
- [ ] 動画スキャン機能が正常に動作する
- [ ] Googleドキュメントが自動的に作成される
- [ ] 重複した要約が作成されない
- [ ] Google Chat通知が正常に送信される（設定済みの場合）

---

## 🎯 次のステップ

すべてのテストが完了したら：

1. **定期クローリング機能の実装**（フェーズ3）
2. **Webhook機能の実装**（フェーズ4）
3. **Vercelへのデプロイ**

