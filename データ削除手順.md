# データ削除手順

## ⚠️ 注意事項

**この操作は元に戻せません。削除前に必ずバックアップを取ることをお勧めします。**

---

## 📊 Supabaseのデータ削除

### ✅ 推奨方法: テーブルを保持してデータだけを削除

**テーブルを削除（DROP TABLE）せずに、データだけを削除（DELETE）する方法が推奨されます。**

**理由**:
- テーブル構造（スキーマ、インデックス、制約）が保持される
- すぐに新しいデータを保存できる
- 再作成の手間が不要

### 方法1: SQL Editorから削除（推奨）

1. [Supabaseダッシュボード](https://app.supabase.com)にアクセス
2. プロジェクトを選択
3. 左メニューから「SQL Editor」をクリック
4. 以下のSQLを実行:

```sql
-- すべての要約を削除
DELETE FROM summaries;

-- すべてのチャンネルを削除（必要に応じて）
DELETE FROM channels;

-- 削除されたことを確認
SELECT COUNT(*) FROM summaries;  -- 0になるはず
SELECT COUNT(*) FROM channels;   -- 0になるはず
```

**注意**: `summaries`テーブルは`channels`テーブルを参照しているため、先に`summaries`を削除してから`channels`を削除してください。

### 方法2: Table Editorから削除

1. 左メニューから「Table Editor」をクリック
2. `summaries`テーブルを選択
3. すべての行を選択（チェックボックスで全選択）
4. 「Delete」ボタンをクリック
5. 確認ダイアログで「Delete」をクリック

---

## 📄 Googleドキュメントの削除

### 方法1: Google Driveから手動で削除

1. [Google Drive](https://drive.google.com)にアクセス
2. 左メニューから「フォルダ」をクリック
3. 「YouTube Insight Hub」フォルダを探す
4. フォルダを開く
5. すべてのドキュメントを選択（Ctrl+A または Cmd+A）
6. 右クリック → 「削除」を選択
7. 確認ダイアログで「削除」をクリック

**フォルダごと削除する場合**:

1. 「YouTube Insight Hub」フォルダを右クリック
2. 「削除」を選択
3. 確認ダイアログで「削除」をクリック

### 方法2: Google Drive APIを使用して削除（自動化）

以下のスクリプトを使用して、プログラムで削除することもできます。

---

## 🔧 削除用スクリプトの作成

Google Drive APIを使用して自動削除するスクリプトを作成しますか？

### 削除スクリプトの例

```typescript
// 注意: このスクリプトは慎重に使用してください
async function deleteAllSummaryDocs() {
  // 1. YouTube Insight Hubフォルダを取得
  // 2. フォルダ内のすべてのドキュメントを取得
  // 3. すべてのドキュメントを削除
  // 4. フォルダも削除（オプション）
}
```

---

## 📋 削除チェックリスト

削除前に以下を確認してください：

- [ ] 重要なデータのバックアップを取った
- [ ] 削除するデータの範囲を確認した
- [ ] 削除後もアプリケーションが正常に動作することを確認した

---

## 🎯 推奨される削除手順

### 1. Supabaseのデータ削除

**SQL Editorで実行**:

```sql
-- すべての要約を削除
DELETE FROM summaries;

-- すべてのチャンネルを削除（必要に応じて）
DELETE FROM channels;

-- 削除された行数を確認
SELECT COUNT(*) FROM summaries;  -- 0になるはず
SELECT COUNT(*) FROM channels;   -- 0になるはず
```

### 2. Googleドキュメントの削除

**Google Driveから手動で削除**:

1. Google Driveにアクセス
2. 「YouTube Insight Hub」フォルダを削除
3. または、フォルダ内のすべてのドキュメントを削除

### 3. アプリケーションの確認

1. ブラウザでアプリケーションをリロード
2. 要約一覧が空になっていることを確認
3. 新しいスキャンを実行して、正常に動作することを確認

---

## 🔄 データのリセット（完全削除）

すべてのデータを完全にリセットする場合：

### 1. Supabaseのリセット

```sql
-- すべてのテーブルを削除
DROP TABLE IF EXISTS summaries CASCADE;
DROP TABLE IF EXISTS channels CASCADE;

-- テーブルを再作成
-- supabase-schema.sqlを実行
```

### 2. Googleドキュメントの削除

- Google Driveから「YouTube Insight Hub」フォルダを削除

### 3. ローカルストレージのクリア（オプション）

ブラウザの開発者ツール（F12）で：

```javascript
// コンソールで実行
localStorage.clear();
sessionStorage.clear();
```

---

## ⚠️ 注意事項

1. **バックアップ**: 削除前に重要なデータのバックアップを取ってください
2. **確認**: 削除するデータの範囲を必ず確認してください
3. **テスト**: 削除後、アプリケーションが正常に動作することを確認してください

---

## 🆘 問題が発生した場合

削除後に問題が発生した場合：

1. **Supabase**: テーブルを再作成（`supabase-schema.sql`を実行）
2. **Googleドキュメント**: 新しいフォルダが自動的に作成されます
3. **アプリケーション**: 開発サーバーを再起動

